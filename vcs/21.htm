<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>票券</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css">
  <style>
    dialog:open::backdrop {
      background-color: rgb(0 0 0 / 50%);
    }
    .btn-orange, .btn-orange:hover {
      color: #fff;
      background-color: #fa0;
    }
  </style>
</head>

<body>
  <div class="container" style="background-color: #e92">
    <div class="p-3">
      <div class="p-4 bg-white rounded-4" style="border-top: 1.5em #fa0 solid">
        <h2>21風味館香草烤雞腿兌換券 (#2051)</h2>
        <h5 class="text-black-50 lh-base">
          使用期限：剩 47 天 0 小時 0 分<br>
          至 2026-02-28 23:59 到期
        </h5>
        <img class="w-100 rounded-4" src="img/21-01.png">
      </div>
      <div class="p-4 bg-white rounded-4 text-center" style="border-top: 2px #fa0 dashed">
        <h5 class="text-black-50">您的序號</h2>
        <p class="px-2 pt-3"><img class="w-100" id="bc"></p>
        <button id="btnGo" class="btn btn-lg btn-orange rounded-pill w-100">點我兌換</button>
      </div>
      <div class="text-white pt-3">
        注意事項：
        <ol>
          <li>若需使用此兌換券請於結帳前主動告知。
          <li>每張兌換券可兌換21風味館香草烤雞腿乙份且限兌換乙次，請於兌換期間內至21Plus、21風味館門市兌換。逾期視同失效。
          <li>請由門市夥伴協助操作兌換，如遇自行操作不當，恕不補發。
          <li>21TOGO、台大微風門市、線上點餐系統、美食外送平台(包含UberEats、foodpanda、foodomo、快一點)不適用本券。
          <li>本券不得與其他優惠合併使用或兌換現金。
          <li>贈品數量依門市現場供應為主，如商品當日售完，請至鄰近門市兌換或擇日再進行兌換。
          <li>12/24、12/25、12/31、1/1不適用此優惠券。
          <li>如部份商品因產品上下架因素無法供應，21Plus、21風味館有權更換等值商品替代。
          <li>本券所兌換之商品或折抵消費之金額不予開立統一發票。
          <li>21Plus、21風味館保有隨時修正及解釋活動之權利。
          <li>其他未盡事宜依21Plus、21風味館官方網站公告為准。
        </ol>
      </div>
    </div>
  </div>
  <dialog class="text-center p-4 border-0 rounded">
    <h3>兌換確認</h3>
    <span style="color: #fa0">請由店員操作</span>
    <p>一旦確認兌換將無法復原</p><div class="footer">
    <button id="btnNo" class="m-1 btn btn-lg rounded-pill btn-outline-secondary">取消</button>
    <button id="btnOk" class="m-1 btn btn-lg rounded-pill btn-orange">確認兌換</button>
  </dialog>
  <script>
    const up = new URLSearchParams(window.location.search)
    document.getElementById('bc').src = `https://barcodeapi.org/api/128/${up.get('k')}`
    
    const dialog = document.querySelector('dialog')
    const btnGo = document.getElementById('btnGo')
    const btnNo = document.getElementById('btnNo')
    const btnOk = document.getElementById('btnOk')
    btnGo.addEventListener('click', () => { dialog.showModal() })
    btnNo.addEventListener('click', () => { dialog.close() })
    btnOk.addEventListener('click', () => {
        btnGo.innerText = '已兌換完成'
        btnGo.disabled = true
        btnGo.style.backgroundColor = '#bbb'
        btnGo.style.borderColor = '#bbb'
        dialog.close()
    })
  </script>
</body>

</html>
